# ─── Database ──────────────────────────────────────────────────────────────────
DATABASE_URL=postgresql://clubos:clubos@localhost:5432/clubos_dev

# ─── Redis ─────────────────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379

# ─── Auth ──────────────────────────────────────────────────────────────────────
# Must be at least 32 characters each. Generate with: openssl rand -base64 32
JWT_SECRET=change-me-min-32-chars-in-production
JWT_REFRESH_SECRET=change-me-min-32-chars-in-production

# ─── Encryption ────────────────────────────────────────────────────────────────
# AES-256 symmetric key for CPF/phone encryption at rest (pgcrypto).
# Must be at least 32 characters. Generate with: openssl rand -base64 32
# CRITICAL: Store this separately from database backups (e.g. AWS Secrets Manager).
# Key rotation requires re-encrypting all member rows — see scripts/migrate-encrypt-members.ts.
MEMBER_ENCRYPTION_KEY=change-me-generate-with-openssl-rand-base64-32

# ─── Payment Gateway — Asaas ──────────────────────────────────────────────────
# Obtain from the Asaas dashboard under API settings:
#   Production: https://www.asaas.com/config/index
#   Sandbox:    https://sandbox.asaas.com/config/index
# The sandbox is used automatically when NODE_ENV != "production".
ASAAS_API_KEY=your-asaas-api-key
ASAAS_WEBHOOK_SECRET=your-asaas-webhook-secret

# ─── Storage ───────────────────────────────────────────────────────────────────
# Absolute path where uploaded files (logos, etc.) are stored on disk.
# Defaults to <cwd>/uploads when not set.
# In production use a persistent volume or object storage mount.
UPLOAD_DIR=/var/data/clubos/uploads

# Public base URL prepended to all stored asset paths returned by the API.
# Set to your CDN or reverse-proxy origin in production so that clients
# receive a fully qualified URL without hitting the API server directly.
# Defaults to http://localhost:<PORT> in development.
STORAGE_BASE_URL=https://api.clubos.com.br

# ─── App / Networking ──────────────────────────────────────────────────────────
PORT=3001
HOST=0.0.0.0
NODE_ENV=development
LOG_LEVEL=info

# ─── WhatsApp Provider ─────────────────────────────────────────────────────────
# Which provider to use. Supported values: "zapi" | "evolution"
# Defaults to "zapi" if not set.
WHATSAPP_PROVIDER=zapi

# Z-API (https://developer.z-api.io)
# Obtain from the Z-API dashboard after creating an instance.
# instanceId and token are shown on the instance detail page.
# clientToken is the security token used to validate webhook requests.
ZAPI_INSTANCE_ID=your-zapi-instance-id
ZAPI_TOKEN=your-zapi-token
ZAPI_CLIENT_TOKEN=your-zapi-client-token

# Evolution API (self-hosted or cloud: https://evolution-api.com)
# Only required when WHATSAPP_PROVIDER=evolution.
EVOLUTION_API_URL=https://your-evolution-instance.com
EVOLUTION_API_KEY=your-evolution-api-key
EVOLUTION_INSTANCE_NAME=clubos

# Production only — used for HTTPS redirect in Next.js and CORS allow-list
NEXT_PUBLIC_DOMAIN=app.clubos.com.br
NEXT_PUBLIC_API_URL=https://api.clubos.com.br
ALLOWED_ORIGINS=https://app.clubos.com.br

# ─── Testing ───────────────────────────────────────────────────────────────────
# These values are hardcoded in the CI workflow and only used in test runs.
# DATABASE_URL=postgresql://clubos:clubos@localhost:5432/clubos_test
# REDIS_URL=redis://localhost:6379
# JWT_SECRET=ci-test-secret-access-32chars-min!
# JWT_REFRESH_SECRET=ci-test-secret-refresh-32chars-min!
# MEMBER_ENCRYPTION_KEY=ci-test-encryption-key-32chars-xxx
# ASAAS_API_KEY=ci-fake-asaas-key
# ASAAS_WEBHOOK_SECRET=ci-fake-webhook-secret
